<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bouncing Ball with Color Trails</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;const cx = canvas.width / 2;
const cy = canvas.height / 2;
const radius = 200;
const ballRadius = 5;

let ball = {
  x: cx,
  y: cy,
  vx: 2 + Math.random() * 3,
  vy: 2 + Math.random() * 3
};

let lines = [];
const colors = ["red", "lime", "cyan", "yellow", "magenta", "orange", "aqua", "violet"];

function drawCircle() {
  ctx.beginPath();
  ctx.arc(cx, cy, radius, 0, 2 * Math.PI);
  ctx.strokeStyle = "#ffff99";
  ctx.lineWidth = 3;
  ctx.stroke();
}

function drawBall() {
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ballRadius, 0, 2 * Math.PI);
  ctx.fillStyle = "white";
  ctx.fill();
}

function drawLines() {
  lines.forEach(line => {
    ctx.beginPath();
    ctx.moveTo(line.ox, line.oy);
    ctx.lineTo(line.tx, line.ty);
    ctx.strokeStyle = line.color;
    ctx.lineWidth = 3;
    ctx.stroke();
  });
}

function updateBall() {
  ball.x += ball.vx;
  ball.y += ball.vy;

  const dx = ball.x - cx;
  const dy = ball.y - cy;
  const dist = Math.sqrt(dx * dx + dy * dy);

  if (dist >= radius - ballRadius) {
    const angle = Math.atan2(dy, dx);
    const px = cx + Math.cos(angle) * radius;
    const py = cy + Math.sin(angle) * radius;

    // Save line from ball to collision point
    lines.push({ ox: ball.x, oy: ball.y, tx: px, ty: py, color: colors[Math.floor(Math.random() * colors.length)] });

    // Reflect ball velocity
    const normalAngle = angle;
    const incidenceAngle = Math.atan2(ball.vy, ball.vx);
    const reflectAngle = 2 * normalAngle - incidenceAngle + Math.PI;

    const speed = Math.sqrt(ball.vx ** 2 + ball.vy ** 2);
    ball.vx = speed * Math.cos(reflectAngle);
    ball.vy = speed * Math.sin(reflectAngle);

    // Push ball slightly back inside
    ball.x = cx + Math.cos(angle) * (radius - ballRadius);
    ball.y = cy + Math.sin(angle) * (radius - ballRadius);
  }
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawCircle();
  drawLines();
  updateBall();
  drawBall();
  requestAnimationFrame(animate);
}

animate();

  </script>
</body>
</html>
